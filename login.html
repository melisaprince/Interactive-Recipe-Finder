<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - Recipe Finder</title>
<style>
  body { display:flex; justify-content:center; align-items:center; height:100vh; background:#0f172a; color:#f1f5f9; font-family:sans-serif; }
  .card { background:#1e293b; padding:32px; border-radius:16px; width:300px; text-align:center; }
  input { width:100%; padding:10px; margin:8px 0; border-radius:8px; border:1px solid #f97316; }
  button { padding:10px 20px; border:none; border-radius:8px; background:#f97316; color:white; cursor:pointer; width:100%; }
  button:hover { background:#fb923c; }
  .link { margin-top:12px; display:block; color:#94a3b8; cursor:pointer; text-decoration:underline; }
</style>
</head>
<body>

<div class="card">
  <h2>Recipe Finder Login</h2>
  <input type="text" id="username" placeholder="Username" />
  <input type="password" id="password" placeholder="Password" />
  <button id="loginBtn">Login</button>
  <span class="link" id="registerLink">Register</span>
  <div id="message" style="margin-top:12px; color:#ef4444;"></div>
</div>

<script>
  const loginBtn = document.getElementById('loginBtn');
  const registerLink = document.getElementById('registerLink');
  const message = document.getElementById('message');

  loginBtn.onclick = () => {
    const u = document.getElementById('username').value.trim();
    const p = document.getElementById('password').value.trim();
    if(!u || !p) { message.textContent = 'Enter username and password'; return; }

    const users = JSON.parse(localStorage.getItem('users')||'{}');
    if(users[u] && users[u].password===p){
      localStorage.setItem('currentUser', u);
      window.location.href = 'index.html'; // redirect to main recipe site
    } else {
      message.textContent = 'Invalid username or password';
    }
  };

  registerLink.onclick = () => {
    const u = prompt('Choose a username:').trim();
    const p = prompt('Choose a password:').trim();
    if(!u||!p){ alert('Invalid'); return; }
    let users = JSON.parse(localStorage.getItem('users')||'{}');
    if(users[u]){ alert('Username already exists'); return; }
    users[u] = { password:p, favorites:[], customRecipes:[], shopping:[] };
    localStorage.setItem('users', JSON.stringify(users));
    alert('Registration successful! You can now login.');
  };
</script>

</body>
</html>
